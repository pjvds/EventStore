box: wercker-labs/docker
build:
  steps:
    - install-packages:
        packages: libv8-dev libicu-dev
    - script:
        name: Echo lib
        code: |
          ls -al /usr/lib
    - scruot:
        name: find libicui18n
        code: |
          sudo find / -iname 'libicui18n'
    - script: 
        name: Copy .so files
        code: |
          cp /usr/lib/libv8.so src/EventStore/libs
          cp /usr/lib/libicui18n.so src/EventStore/libs
          cp /usr/lib/libicuuc.so src/EventStore/libs
    - install-packages:
        packages: mono-complete 
    - script:
        name: install mono 3.2.3
        code: |
          wget https://launchpad.net/~ermshiperete/+archive/monodevelop-beta/+build/5036340/+files/mono-3_3.2.3-1_amd64.deb
          sudo dpkg -i mono-3_3.2.3-1_amd64.deb
    - script:
        name: build eventstore
        code: ./build.sh
